<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>WatchLater+ Settings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
  <main class="options" role="main" aria-label="WatchLater+ settings">
    <header>
      <h1>WatchLater+ Settings</h1>
    </header>

    <section aria-labelledby="lists-title">
      <h2 id="lists-title">Your Lists</h2>

      <!-- JS renders lists here -->
      <div id="lists" aria-live="polite" aria-busy="true">Loadingâ€¦</div>

      <!-- New List Form -->
      <form id="newListForm" class="list-form" aria-label="Create a new list" autocomplete="off" novalidate>
        <label for="newListName" class="sr-only">New list name</label>
        <input
          id="newListName"
          type="text"
          placeholder="New list name (e.g., Podcasts)"
          inputmode="text"
          aria-label="New list name"
          required
        />
        <button id="newListSubmit" type="submit" aria-label="Add list">Add List</button>
      </form>
    </section>

    <hr aria-hidden="true" />

    <!-- Backup & Restore -->
    <section aria-labelledby="backup-title">
      <h2 id="backup-title">Backup &amp; Restore <span class="host">(JSON only)</span></h2>

      <div class="backup-row" role="group" aria-label="Backup and restore actions">
        <button id="exportJson" type="button">Export JSON</button>
        <button id="exportCsvAll" type="button">Export All (CSV)</button>

        <label for="importFile" class="sr-only">Choose JSON backup file</label>
        <input
          id="importFile"
          type="file"
          accept="application/json"
          aria-label="Choose JSON backup file"
          aria-describedby="import-hint"
        />
        <button id="importBtn" type="button">Import</button>
      </div>

      <p id="import-hint" class="host" style="margin-top:6px;">
        CSV is for viewing/sharing only. To restore your data, import a JSON backup.
      </p>
    </section>

    <noscript>
      <p class="host" style="margin-top:8px;">JavaScript is required for this page.</p>
    </noscript>
  </main>

  <!-- Keep module at end for robust load order -->
  <script type="module" src="./index.js"></script>

  <!-- Minimal a11y fallback if styles.css fails -->
  <style>
    .sr-only {
      position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
    }
    .list-form { display: flex; gap: 8px; margin-top: 8px; }
    .list-form input { flex: 1; }
    .backup-row { display: flex; align-items: center; gap: 10px; margin: 10px 0; }
    .backup-row input[type="file"] { flex: 1; }
  </style>
</body>
</html>
